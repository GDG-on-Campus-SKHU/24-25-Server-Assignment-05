### * 사용자 관점에서의 로그인 과정 흐름
** 로그인은 사용자가 특정 시스템(애플리케션,웹사이트 등)에 접근할 수 있도록 인증하는 절차라고 말할 수 있다.
로그인 과정에서 사용자는 일반적으로 사용자 이름(이메일주소,아이디)과 비밀번호 같은 자격증명(credentials)을 입력한다.
이 정보를 기반으로 시스템은 사용자가 등록된 사용자임을 확인하고, 해당 사용자가 시스템에 접근할 수 있는 권한을 부여한다.

* 로그인 과정에서의 중요한 요소
* 자격증명 제출
* 인증
* 인증 상태 관리
* 접근 권한


### * 사용자가 로그인 페이지에 접속하여 ID와 비밀번호를 입력하는 순간부터 로그인에 성공하고 실패하는 순간까지의 과정을 설명하세요. (2경우 전부)
1. 아이디와 비밀번호 입력
+ 사용자는 자신의 아이디와 비밀번호를 사이트에 입력합니다. 입력한 정보는 정보를 제공해주는 곳인 서버에 보내집니다.
2. 암호화하여 서버에 전송

3. 서버에서 확인
+ 서버는 받은 정보를 까보고 이 사용자가 우리가 알고 있는 사용자인가?라는 검증작업을 거친다.
4. 세션, 토큰 발급
+ 검증작업을 거친 후 정보가 맞을 경우 서버는 세션을 만들어서 사용자에게 다시 돌려줍니다.
5. 로그인 성공 혹은 실패
+ 이후 클라이언트는에서는 받은 세션(세션ID)혹은 쿠키와 함꼐 화면에 보여질 내용에 대한 요청을 보내고 서버는 세션과 쿠키를 확인하고 인증에 성공하면
내용을 보내주고 아니라면 실패 메세지를 보내 다시 로그인 하게끔 해줍니다.

##### 로그인 실패
- 비밀번호가 일치하지 않는 경우
- 회원정보가 일치하지 않는 경우


### * 로그인 성공 후 사용자에게 제공되는 경험을 설명하고, 특히 '로그인 유지'가 어떻게 사용자 관점에서 나타나는지 서술하세요.
+ 로그인 성공 후 사용자는 권한 내에서 여러 요청을 보낼 수 있고 브라우저를 새로고침하거나 나갔다 들어와도 일정 시간동안 로그인 상태가 유지된다.



### * 서버가 로그인한 사용자를 인식하는 방식 (로그인한 사용자를 서버가 지속적으로 인식하기 위해 쿠키와 세션이 어떻게 사용되는지 설명하세요. (서버 딴에서 api 호출할 때마다 어떤 일이 일어나는지.))
+ 세션 기반 로그인에서 쿠키는 그저 세션 ID를 전달하기 위한 매개체이다.
+ 로그인 폼에 입력된 사용자의 아이디와 비밀번호가 DB에 저장된 사용자 정보와 일치하면 서버는 세션 ID를 생성하고 이를 쿠키에 담아 브라우저로 보내준다.
+ 이후에 클라이언트가 서버에 요청을 보낼 때 마다 세션ID가 담긴 쿠키를 쿠키 헤더에 포함하여 서버로 전송해준다.
+ 서버는 세션 ID를 확인하고 해당 세션ID를 조회하여 해당 세션이 유효한지 판단해서 로그인한 사용자를 서버가 지속적으로 인식할 수 있게 해준다.
+ 서버딴에서 api를 호출할 때마다 이와 같은 형식으로 이뤄진다.




### * 쿠키가 세션 기반 로그인에서 어떤 역할을 하는지 구체적으로 서술하고, 특히 세션 ID가 쿠키에 저장되어 클라이언트와 서버 간에 전달되는 과정에 대해 설명하세요.

1) 세션관리(Session Management)
서버에 저장해야 할 로그인, 장바구니, 게임 스코어,접속 시간 등의 개인정보 관리
2) 개인화(Personalization)
각 사용자에게 적절한 페이지를 보여준다.
3) 트래킹
사용자의 행동과 패턴을 분석하고 기록하는 용도


1. 클라이언트: 사용자가 로그인 화면에서 로그인을 한다.로그인 정보인 id, password를 서버로 request한다.
2. 서버:DB에 저장된 id,password와 입력받은 id, password를 비교한다.
3. 서버: 일치할 경우, session id를 생성한 후 session id, 사용자정보(id, 이름, 권한, 설정 등) 세션 유효기간 등의 정보가 담긴 새로운 세션을 생성한다. 이세션을 서버의 메모리 또는 세션 스토어 등에 저당
4. 서버: session id를 클라이언트에 header의 Set-Cookie로 전달한다.
5. 클라이언트: 서버로 전달받은 session id를 클라이언트의 쿠키에 저장한다.
6. 클라이언트: 서버로 전송하는 모든 요청에 session id를 쿠키에 담아 전달한다.
7. 서버: 클라이언트로부터 받은 session id와 세션스토어에 저장되어 있는 session id 일치여부를 확인한다.
8. 서버: 일치 시, 해당 session id 에 연결되어 있는 세션 정보를 세션 스토어에서 검색한다.
9. 서버: 세션 정보를 활용하여 해당 사용자의 상태나 권한 확인. 요청에 맞는 작업을 수행한다.



# * 세션을 구현할 때 보안적으로 고려해야할 부분

**1. 세션 hijaking 문제**
+ 해커가 중간에 가로챈 쿠키(session id)로 http 요청을 보낼 수 있는 hijacking 공격을 당할 수 있다.
+ 해결방안: 사용자가 로그인할 때마다 세션ID를 재생성한다.
+ 해결방안: 세션 타임아웃을 설정해준다.

**2. CSRF 활성화 문제**
+ CSRF 공격은 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행위(데이터 수정, 삭제, 등록 등) 을 특정 웹사이트에 요청하게 하는 공격이다.
+ 해결방안: CSRF 보호를 활성화한다.
